#include <Servo.h>
/*conections
analog pin of moisture sensor to A0 pin of arduino
vcc pin of moisture sensor to anode 9 volt battery
gnd pin of moisture sensor to cathode of 9 volt battery
*/
/*
vcc pin of ultra sonic sensor to 5 volt arduino power pin
gnd pin to arduino gnd pin
trig pin to arduino digtial pin no 5
echo pin to arduino digital pin no 6
*/
/*
vcc pin of servo motor to 5 volt arduino 
gnd pin of servo motor to gnd pin of arduino
signal pin of motor to digital pin number 3 of arduino
*/
    /*
    7 segment display
   a=2
   b=4
   c=7
   d=8
   e=10
   f=11
   g=12
   */
Servo myservo;
void moisture() {
  float mois;
    mois = analogRead(A0);
  Serial.println(mois);
  // Serial.println(mois);
  delay(10);
  if (mois >= 400) {
    myservo.write(90);

  } else {
    myservo.write(0);
  }
  delay(100);
}
int dist, dist1, dist2, dist3;
//7 segment display
const int a = 2;
const int b = 4;
const int c = 7;
const int d = 8;
const int e = 10;
const int f = 11;
const int g = 12;
const int trig = 5;
int i = 0;
const int echo = 6;

void sonar() {



  if (dist <= 1000) {

    if (i == 1) {
      
      digitalWrite(b, HIGH);
      digitalWrite(c, HIGH);
      //   for(int m=0;1>m;m--)
      // {
      //  if(pulseIn(echo,HIGH)>=1000)
      //  {
      //   break;
      //  }
      //}
    }
    if (i == 2) {
    
      
      
      digitalWrite(a, HIGH);
      digitalWrite(b, HIGH);
      digitalWrite(e, HIGH);
      digitalWrite(c, LOW);
      digitalWrite(g, HIGH);
      digitalWrite(d, HIGH);
      digitalWrite(f, LOW);
    }
   
    
    if (i == 3) {

      digitalWrite(b, HIGH);
      digitalWrite(c, HIGH);
      digitalWrite(a, HIGH);
      digitalWrite(d, HIGH);
      digitalWrite(g, HIGH);
      digitalWrite(e, LOW);
      digitalWrite(f, LOW);
    }
    if (i == 4) {
      digitalWrite(b, HIGH);
      digitalWrite(c, HIGH);
      digitalWrite(g, HIGH);
      digitalWrite(f, HIGH);
      digitalWrite(a, LOW);
      digitalWrite(d, LOW);

      digitalWrite(e, LOW);
    }
    if (i == 5) {
      digitalWrite(a, HIGH);
      digitalWrite(c, HIGH);
      digitalWrite(b, LOW);
      digitalWrite(d, HIGH);
      digitalWrite(f, HIGH);
      digitalWrite(g, HIGH);
    }
    if (i == 6) {
      digitalWrite(a, HIGH);
      digitalWrite(c, HIGH);
      digitalWrite(b, LOW);
      digitalWrite(d, HIGH);
      digitalWrite(e, HIGH);
      digitalWrite(f, HIGH);
      digitalWrite(g, HIGH);
    }
    if (i == 7) {
      digitalWrite(a, HIGH);
      digitalWrite(c, HIGH);
      digitalWrite(b, HIGH);
      digitalWrite(d, LOW);
      digitalWrite(e, LOW);
      digitalWrite(f, LOW);
      digitalWrite(g, LOW);
    }
    if (i == 8) {
      digitalWrite(a, HIGH);
      digitalWrite(c, HIGH);
      digitalWrite(b, HIGH);
      digitalWrite(d, HIGH);
      digitalWrite(e, HIGH);
      digitalWrite(f, HIGH);
      digitalWrite(g, HIGH);
    }
    if (i == 9) {
      digitalWrite(a, HIGH);
      digitalWrite(c, HIGH);
      digitalWrite(b, HIGH);
      digitalWrite(d, HIGH);
      digitalWrite(e, LOW);
      digitalWrite(f, HIGH);
      digitalWrite(g, HIGH);
    }
    //Serial.println(i);
    i++;
  }
  delay(1000);
  //free(arr);
}

void setup() {
  myservo.attach(3);
  pinMode(A5, INPUT);
  pinMode(2, OUTPUT);
  pinMode(4, OUTPUT);
  pinMode(7, OUTPUT);
  pinMode(8, OUTPUT);
  pinMode(10, OUTPUT);
  pinMode(11, OUTPUT);
  pinMode(12, OUTPUT);
  pinMode(trig, OUTPUT);
  pinMode(echo, INPUT);
  Serial.begin(9600);
}

void loop() {
  sonar();
  moisture();
  digitalWrite(trig, LOW);
  delay(2);
  digitalWrite(trig, HIGH);
  delay(10);
  digitalWrite(trig, LOW);
  dist = pulseIn(echo, HIGH);
  
}
